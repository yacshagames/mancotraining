--------------------------
-- Fightstick INPUT     --
-- by Yacsha            --
-- 2021-Sep             --
-- Version 1.0          --
--------------------------
lib = {}

------------------------------------------------------------------------------------------
-- Fightsticks Hexdumps
-- tool for convert png to hexdump: https://holtstrom.com/michael/tools/onlinehexdump.php
------------------------------------------------------------------------------------------
local png_fightstick_base = "89504e470d0a1a0a0000000d49484452000000540000002008060000008cd85f160000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c00000bf04944415478da745a3b8f5e4911edeaef1adb486b1b21c10a6957ec221143c43f20830004192281880dc8880909f607200242c4bf00897cc543420869110fc9c8cfc59ef1ce78e656d1ddf53add776c6b74bfefbebedba74f9d3a557da9e4bfcfbdf3ee97bff3ee7bef7ff3d6ed3b6fefcc42a5fdafd40eb52de95f195fc79172d33fc12f74d341d103876362a7d07a97f82ef003e2b76fd7c9721fc12711bd9ff89d054f15f805819f95653002e3a1711d33d3d9cb97cf1efefb5fbf7ffee4d16f85f9619cf2852fbefdbd6f7ff7fb1f9e6edd79e7d9ff5e9617e7e765675110eba9fdd5f6b9eab603dc3ffbe0ed47881604c9702382676a0f430919d978498e10ae13d46fb30e7adc43f2733e01c11e31146d5f1b573f29c0943c476262c576c97172c5ce652e57d7d7e5e5d9cbf2e8e1c3c74ffef1f75f5c9cbdf890eeddbfff8d1ffef8277f78fee26cfbe88f7f2e4f9f7fa2609e4ea50c304f0ae6a92a9003e46a6ca5609bee5f688720130ed6bffb44c05cc8c26c45b2e4bcc8b8ceb7ce69fc9d238d6df2064a3e9d08f8c258d822c8e3383bd8fbb867636ad9f7ebc29717e5e9c77ffbc1f6de57befac1a757bc7df4a7bf94ff3e7ed64e90015eed012f0e5803b3b47da583ac400a21a8ed076a7e8ec1bb4ca04090033183490b1b1d7802a089724b6f90964906682656ccef24136211223917c27021ebf9d2cf93116132185a064bfb557dcb6ddfdd079fffe9f6993b9f7dffd1e3a7e5ecfc628054372ab5b37230746b243db5bf6db0afd6aaa30909e8d0540da1b6bffae84d63c558e8dbf1e494e0fa310711bf079f09d0140b5ca2649c4f16bd51c993a12265ba7dc8c531fc95b86c00771079fc15d66d67e60074d7ef7b63688bdc07dbdeb2cfebabdd64a68e10f7505720b7c158d5cf9369e809425f4126087fdd5408b73e0939123fb5ff640d5623ed680e559b8b1213038c5a73184d121ea0c7f9cb25e4a10c8949f7f53d1c7ae95be17d6ca96db97fae06741d7985b731f4ce3c67dd00ab81d9d9196076c6b6efa409aa9f5b07882a010a1825b06493b30244c0a648669095e2780eb93f9350eaa527c2eaf26a0927a52105970a262c01e111b409c954ca2437beb3182b8da17b27de696c6937e92b1d54c3a57ddf2806763256d192d50de0ce444f509437c0731db46052846c3b76022525f2d4a4130109881078db877a5851670ff14b91df8f649789b30e2411dd98a0546735accbd0c8b63d2998dcaee176d9a981dad5963d52cb005419a643a896053d115102e860979385b9677d03d3588281353416404e5d9c8433584d061e61667376ba9308949c65028aec566d31ad3681cae8d46572dd419f291eee9a845a76ce10279e6ce070605d976b4d86eaecd79925a526c0fe67a086d12f2e11762ee9f903e70865f0a9c646d7440fe7740a9a6ce6acdfef23a0c1b3b68ef997fc4c071f2c3081c6c82ae98c28bc04dc083474d8a41da46c2f23af9f146c920e3412aa33d4f5c3acd9b04ae2f7f7ccaa200a9365f39a4228d5064e36e704005304a2b283c206a6977566d4523393e85c802d4349c0c0ad6ed7247d1526383296079997a4154c17bfa74f8281d0dd4daf8c5aa8573b7d6fdfeb4975d519daf3900443fb80252cb77aab98ef95bd0ea4fdd5049c0a853494988cd4410a3583fb14484e482fa272d805a52959d2439ba5124390b929c258cd082db64ac624d3e48f1d6409db349255cb1fe2ac6c935f382354f38b568f5b81191f3737aaa744e91ddde48b7ff64c6aac23a160f45cecb8e6d4f04091089df97e01d1c13d86b9777a49091faa522530071e159eaed3292435397fb3ccd92b129d19ffee64c47c67388e0e1cdb984d0a8492505b82902559560cee6bb532e802ed0d865135743059b531ac20dbe08d2d719fa15d351246afc8aa69aa8617e9b5cee8aef8d5c088729ce2f793806aabc64fab1dcca608da2f2f1aa426cffbfd044b30045740184cb288609f27668f0ab37322a02f58ca0e410e6f9bcfc62eea94c7440710bd043f8ffd390d149688d1c16c76ed06a76fcf321e90fd1ae84b603db49b4f042cf47c39949d7a1ecfd5948d5da2bc3c564bc02a680150102d9f4befb551596c182b63c4eb5763e6a8f1c9f74948ab96613298c1164aae6d6436438843137bc986b966946ed540af14c9610a3f484653b9538cc990e585bcc494b46c4012a2630b40dcbd4acea8134584e6668b64fd1f248074b045378581993e415d3f3a187cd26dd56cda4d6e656b9018c1fabe30f76e43c63109cb331c42d56d749c3cdc9b25f19d6ecd50e7c4a5c133fb00814db964b03542132626b4b7663d1f9d2af2e015531b597ab332f7628769f2a8b566c9c2de2daa02610b6befac98cc865e7a825247db81aa35b3a4f61a397de7b0118176dc7bb4ad6b5a2bb184230449619710fdb04210c33b0b544be983c64f312454ccea395fd05b3568a7368240df55a0ff29211d3e29be45e66ed927d48b3471eac9eca133ead96a3a6140f669e292e23eca31a8df553b22d4053ca68671811e4055393103eae04643a352161f843d4f6d5867c92bb344924ced44f7ab4233d892d2ded52d2a294fc604a096f0eb25f010c93eede609223ad4c846d34fadc03a805ed13450291bae9e3c4715225ec198fe7680bc71a2695061126c66b08268595f23008bf6049ba0151855f91b1a2f539f35db55de09cc4a2a482196732580eed5ba44fb4ea350ad94391f4edc5243a7342ac150f159a16c8215672b59921a617ed244a53310a54ee8f36e209b4beec0531c2f1015145557c4603fb697a88098c0b22e9d66ff3d0adb839ed53d5d8217e72ccb36f3d289853b1b984638771318f6fdf3e67649685ebcea00f55e1f731d6cec8d815324256dff6b095bc7f751d1ef558db34048d5029d7fcb9abdf57582167a987db18485261bda4c92559778c3a342b729aa36ce7e81f70104eb068131cbd477cdaa0cd795d4720d96b2d867075923511c506cdee0cdcbb29632927dfbaf66bcb38eb5db522943c89d39a70e4665b31b6bbc9ad933d35737cdd00f1508db6c305336a5c9a4833d7cc974cdb23e41283356b4726c1742fbd9bf73ac924a82694d66de3dec7703d9e4a0d7f2193f686061916a646856e3ded8eaa0164b4a3d7155eb07c6c3c79a108185cb565e82ada3668275a418740d60551e24121b2fcb2c51dd325639b92a4ba8a9b1eaaa93823d04222c1c3824444c2cbb671e5dfafed79bcd3b2c875871a0fd5034c03e5f22b09e623dc16a0b5205d68fda888655a90c75edd2a9a20c7711e87b129e53626d4a07b54f13807d512f1999e64633a1a310c8fcd8445e1ad6139053098ab98487d361610073872ebe36a107a072a8651d521ea99b2cbb6b094c560bef4d06555bc9faa0fd1c863053d983d0ad342f2dc32008d6eb71595acaec33896e5892f667aea3d60af6cedda3ec9962f31e5751a70a0cec9d978f6c6b49cac8eb06e4f500971d603bb64d0d0cf39ddea61a76c6db82ec4f52adc9a14c8de680e86a2843277e87969d37530a2cd84d2f4760839896eecf040caca24e1ed3fa324bb646f6afe723914b598e47b5c4b9ead99bcd4d377b121e601a53f97ab76383a12ddf46934026aa8f6ef548dc3dbcc4bad359ba912dc679d220b33d8299ce120d71d241b5aee6520411543234f9cfc38a28cdab9fe50660692dd627237f0378b8ba0a4b21ba752db57097d4501ea0b6fdd7576d7bdd31abdbf34f9e3db97bffbcecfb1e2f09a8f762f58ea32556adc2b0c6885541aaa37c1c9494c9fa08168f07e3bdbcb500e15c681e392d667feaa62d2f4bc56aeababe5fd2955059da76eb6440c87bb78a4796df07d93c41ed579785af1aa8d75717db7ffef9f1af2ee5ad6fbdbab81c278cee335380d919c9bbd8c29c6893c4ccf74ef3720715b420027b1660166d2ca52c83a7696072003ec13a604973f6a62253f80bb08f7ce9647a85085e86f05a2cda7b7baecdf7d76fdadf7ef5ba5c5fbe2afbeb8b7279f6e237e3da5b77eefdfcee832ffdacddf976beb252e3a5b0f9ed3bc2b883062c6585b0bec521a5bc392ee77093555b094cb72c0c3e80b9be52b5bc05b1ac5961484d959b2f4547a324da6fe93b3b987b636503941b435fbf7af1ebd7afce7e148f53ebe96bb7eedefbe0b4ddfe7abbf75b600acbe18dae299aa038a6e37b19b81e7e784b667deda62cb7c145b435a4e1852759a27435eb3ed1f198b4bceb44b0dcb3cc92405688446549aa31f4bc85fb5faf3e3dff658beedff563ff176000e5ff4ca7a08236c30000000049454e44ae426082"
local png_stick_back = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c0000025e4944415478daec964d6bd44018c79fbc279397dd6db176c54f203d79f1e4a9bd79d6a32df8150af650bd78f02c1ec5838a273f8047d15ab08a545071b7764b6d57b6b46b36d92493d9bc3a33b582478540c13c30c91042f29bffff9f2723946509a7a94438655503d54035d07f0724ffcdcdd79656e8b1044d4560da2d3090058e6d5d9a9d999a6b38485214692b4bf30d2f08e29d9d6f30743d1045111ede5bae06e8a45877a72f9a6b35ad3bc840f32126362609341b286935cc0d94e9ab4559beaa5c2106529605688671d7b2ade520c0f2d1d0832c4ba1c87328ca425564f9727b76eae574cb7ef4c3f5970084ea80c2f108544dbf62598d95288a214d0824741479c6610541804410a1d31dc1b9f6cce2d933d3fbeec8bfcd7dae22d4310e2f98a6f3204953c0a107c1d80582430a35819caa945330366449007f8c0199f6aaaeeb572bfbca8a225f9055adcd20621c409a52903ce50ae545ce6d6396f21d04558b4c72a6dac5ca2c9b10aca5548d0c126ed5b14d220d383db37c89c7ce48920cb22cd36c6580712455a6503876d7dce181cfd460d6f020b33953a7f8a50c5ba5a282a26854210cfee8b053191021d19bdddec75b240e3900836116d109cfad280a2cf4a0eb26ef3ffddd2fcfc6fef0696540cc2e1c78f7bb9fde3eced28436469b2ba1a83a683a02841c405683a215d0eb6ebe181e7ebf41e2985406741256cf3d58fcfce1f5f541bfb7c7aeeb86c981988d83fdafa377ebcf6ff6f7b6e6e9e303a66265a1febd0a1a5a1aea27db9df7eb83fef682e5b4ce4bb22a4c487444e2684d558d4dd369fed3bf4ca837f935500d5403d5407fd64f010600d45f42b9130707b30000000049454e44ae426082"
-- stick center
png_stick_center = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002854944415478daec96bd6fd34018c6dfbbb3ddc449036d07080b20844048fc0b0c2c65a3032084ba21758511c484f81fba30c35089858d81ce0c082424584ad5f48b924012254efc71f7de1defd991105b070f95f04996ef23f6fdfc3ccfbd0ab3d6c2496a1c4e58ab802aa00ae8bf03f28efbc3fdfd1d70251465064992c0281a5d35a8ee00b32b828b36302e8cd6bd4ce27b6decabc0f73f2e2d2e40589b03c1399cbf74ad5c20d7185dc6d8da348e9e053e7f1a9e5a12411000a70d193380a8cf4829af47d1e4f1781c6d48d9580bebb5112d96af109bbd7438f8f592315c6db516c1f7031042d09a73de50dfcbc79ee7eeecded1d1e1d94618de0ac27a527a86b22c857ebfb78698aeb6e617f24d3967398c8365ac00736a71820ac306341af51b9dcef67a7f303c573ad070d85f198ffa4fc80282f167aab86609c2a9529b995abc9451e09af510e2e9f8fe4e67fb41e94093c9e826b3e6a2e01e6d66811903d658172ae0a48e20c58c469aa3796d1c2758ca95e77bb5641a5d2e3d43dc18f2c880b19ac2abe84151849ce0b274023629000d0169ad094e82562a87f4dc312b5ba1e974f20125f6346d80468222284d17228d15525fe720f998e6ddbaca24415bcd05df2b5da1af5f3e6db4dbed0bcdf9e673f4481d9f2c2180e2f4b1c2226b66401a9492742795b47aa7d1be295d2199a6e9c1eede8be1efdea6a213e7be5e53568cb387ac4107206736515fa50948156fe94c3db4987d2b1dc805d79d9dddef5b7707ddeedb348e6c964c40129cb3d165479122328b2189c794abe967cc709972f5330f7fd99615500c949483ee8fc3db46e272f374f8884af5154fcc352d9522a5d2d8221e907aeb1acd6ba7dedf1a7fcc025cfdc9af802aa00aa802fab7fd1160001431733ff38cc5920000000049454e44ae426082"

local png_stick = {}
-- stick up
png_stick[1] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000003254944415478daec96cf6b134114c7dfccce2659d31fa1118bd836506b51c193e0494404e94941aa879efc0344f0d083f4a007cf05114f8278f12042452f522df62656f027b5d4966adaa6b6b598369b269becce8ff5cdc6560f1623d9430e1978cccefec87cf2fdbef77689effb504f83557b6326930e66cf75a1547660b35000ee957aa594679452dde0538310b228a41a23067b1b33994a245a216ec5c0300c48751f0a17480fad256e0aa8aa21a5b86a3276b9a929de6e32130825c0b9078e531e721cefae94708d126ae313f860f52e906a2dd30a6998bc9d3bb6915b7bdcd2d2bad7b2e2c0180bce032840a5400881500eac67b3654a23fd5d1d1d4f0d84edaa52215a3d3ae066bccdcefdb8df1c8f238c853014eda081253a183302407dad2d998c158af643dbb68ffa0130840bb499cfb7afae2c0d33831cb0ac66a0b4a20cd9daccc73518c19a520a6827241389787a7eeedefcc2c2c9d08172b9ec00f79c0bb1680c185a4031a302b77d85aa44c1dad5040a8ff12ce681ce0512a86550ffc8daf7e5bed0abcc2d39874d46e25a019d2b94546c5412830a28e381c24cd6d72a73255032109cef091d88519a03c9412a1e5413f34da02891a23e78b2a82baf120884ad0003eff35c5c0b8898463974cb328be947c542e1b514b8992f40480f93dc032ef4cc712d8359af35b0c75de4e708a9d6d1c837a12b949efb3c6127775fc766374a0dfc27110bd094205fe05728e523980089a52fb940a81228c16ffac27f10ba4294186067379e2d2f2d0e7ae552d0adb95640a24db2d27f242aa470e66e19cac53ce68e774bbae286c2961e3a10163850ec35ab99ccf0b774fabc57c84f33c251198e79eb07fd8850098ca09ddcc960fe5c112e1fdc6e62615b16314d2c610ad1684497d6c89799af234f9ebfb89d4aedbb94eaec44580acb2bab3039393dd17fb6ef444f4fb74ea0a0eaa4aeb6b0813e4ccda06d04e2b108bc9f9a858f9f66c1299596fe72ebfad8f84b7eb0773f9c3e753c38a1a1ce0d54fbc2dc2ad77fc40ee3e2ef94de8e3b35ed5323901ea37fc0bcc368ad05e8bf3e3f76184318af304c8c710cbb961f23f5f6c548a1ce4603a801d4006a003580ea1de8a700030016211d52aa0b4ece0000000049454e44ae426082"
-- stick right
png_stick[2] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002b04944415478daec96bd6b144118c6df99d9d9dddbdde492cb79c6d3140ada48fcc028d828d8680a5111c1c63431296c6c2dfd022b1bb1d0ca4650ac0db66904ff00352836364610632eb77b77bb7b3be3339b048c58e90602eec073b733377bf39be77de76598d69ab652e3b4c55a0954029540ff1d90f5b72f32c636f4a72e5da0b3674e51d46d513fd342111d6d8c36afd446ea2789f33a94312e3ebbaeffd2ad782f2c213f0921a817a7343e7ef0df81fe04a894262c526f34b73f1aa96fbb285d9fb8602498051e4199d6cd244d8eaf2c7fbfe9b8fe9d20a8dec59bba10877e6f693f25c796f5c6aeddaf06866b13b6e390b06ce24c90b4640e840fca009da6b18c3aeddb4b3fbe8d795e75b6c81c32711b83f6cebf7eb3c309ec7bd591e10969bb24a54d0200080d5c12c40427c6195952905b716968a846ae6bcf84e1d2e5221d7a08cd404a91d6d2731d010069adfe2d7206300684e740dce41da435cf1df33c9fc270e53aa63e2f02e82a746dbd73f8c07e6a8e361112989edf200061c456416cdb274d8ab22cc398c6144596258c937b8a0a59f06b47582647b07b93dc0668ed5a631656f904b8c52552d844d98ce85cccc4b120a0c7d0dc7ae7edfb8ff4757191b27e420a2e182794ea4308269ebb9d658ae3365056c7ccef699a5212275f8acaa12e740eda0755c376d4095bed5b4130705e4bec140e69844bafed991947b819832f3869062a0c438a93fe9322933a8316ccc3e4e913541df46e4461fb88ed6463d2f148205c1a0b2b8e3a24acfc949940298c475148ad5638e7fbb5079b528782c0a3384d3ea88c4fc649f254f67a87a47488e3c449698ebecc7deaa35e45bd1ebeb367b5a1c634e7cee6144695a9bc5ae38efe2eed66c73ad1d21409398d1ab413631e4a003299b585b0172a15ffbeef0dcedbb64349baf14ecfca4b7e095402954025d0c6f6538001004ff0fd1904adc0ad0000000049454e44ae426082"
-- stick down
png_stick[3] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c0000031c4944415478daec984f4814511cc77f6fe6bdf9b7ebceea2eb5fe595313414aa2088a8e867509840ed12188a853811476e8e2c120e8e021e8d639e8505e122209a243872e750922cc0411113557cda6997166deebf7c65d2850d8c509f6b0337c1976e631ef33dff7fdfd66582284807ada14a8b3ad01d4006a0035801a40f50e44ab1d4808d9ebd26059016a0af569b74155bf33e5c06ab4c76697014459aff73dcf3e819efc0553d1d5fd0055bd6477476e80a2ec44eecddbf7f075e63bb89edfbecbd056cb34e1d8d13e387ea40f1c6f1b780d9f3855039d397d02544505cb3261f8c210ccceceb1c997d32d0303fdd0d65a001e71985f5880f9f9c58ee17367711c85f55209b61c1f22ce9307f2fd008122e912c384dfeced3b3cfa60fc5e11280555d58180b43c4285b77e963607971617c77c7f7bd20f02e03500d550f63bb6539d4d304d7f4499550c0505c15588d01d21b00a09835030d0d299fef6eeee17856271944791444d1e48619aa9ea748c326dc4486580e90628d21dcad0240a445550041863601a166886096d1d9d1376aef93c47e792ef43945d5628b9ad3113544681321d45e35c11a9d807dc7179e48efc982b809e9ede71bb39bf89b7f89028103eff49429416151dd01086312d7646569e6c9a95c629f322030e0233475548a5d3a7aca6e68b89036d0791c1740d9f5cc7103314ba82132ae80ed32d2058da61e0815008a865c030c4e6ad523cf26ce219a28cad6072638058aa94121f0d04527062f91b5dc4255462e7e26607e0e8a6f52571a00307dba6234e3e87610882e044b2a8705710c0fdfd0b5df0f18404c265c3f32117e0f91e3a6a3dcf6673cf1207ea3a74e85d7757efb5b58d0d27402899951d0730b924fce7f5c07908aebb056124be155a3b469b3299e5c48164466cdbfe984ed9974a6b6b9eebba20dd0ac308fb50455ce605e4b52dc759b2b3f92b94b2520d6da8fa50579e3e9fcbbf5afdb15a585959bf6f59ce75cb3252b2e2042e518021f63d7f3912e4b19dc93d340c3392ef31f23fbe87e270c80e23385618dd0c38dc711cffa9ef054308da09844718e439acbe29ec4133b2ca448d30e595a8af3f1bfe083000d2dfb7ccd2cabf090000000049454e44ae426082"
-- stick left
png_stick[4] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002ad4944415478daec963d6814411886bff9d9dd24bbe79de70f46503b41b1b08cd8a4b18a451a05c1c62a16626365a11636b6961263a1858a8a95444b2d4d401052a86013f3a777979cd9dddbddf9f39b39220976ba81803bdc5bdcccceccb3ef37efb0c418033ba951d861ad02aa802aa0ff0e886ffe33f37e167c8fc07adc853c4b477bbde49a52c5310053335a514248aa955a0025a638f51f7a1e15dc0378fef235dc7bf074cbc27f7be16e01c21da128f2c124fd39c539bbb0774f13b8dd110c68254008015acac342e4a784c8ae8032178dd17394d1ed71a890394992ceb366b33116861102522016475b20094a4b10b2408314883c3d59e4e93435ea4c1ca79fb6052849d6ae361abbc6eaf53a508a30940041e7b5d6601403a938f65150a400ce42f03c76687961f1cef49b77b770fa10aa8bfa8c52a500053ebf1445116ee4f581d0212c0912d9f5897b86e014827d1acb8b3f88eab5f1a8168eb73aab1bcbbc429d43f5fe39657ee01fb4308c31074471f320a8c1e05003c8461fe5fd7114e33e1c181e8613c78f6e5e660c35514aec8d3d2cce09e2860cd64b6b810550ee41eb58df26e202406c92708a927f54282ea56442145fa554fb39d7b8a77125913659b8b171d2366f2e757650e35159595e321f3ecee5bfdf02601275bf14204abdbb699a8c30465c599c23d6050b83075b2b04d27d3784c4d4d9ab20cda6f0b4ddc4ae0895a1be9576534751f3499615936b6b1dc87a19baa35ce48db2300a532630fada3a09a2c8a0db5e9dcde3e2fae8e991259cfe0535dfb7afa4d853caa0b97bdf441c77e7573b9d1b41e079bee703b3e5416794910866406409b45b3f5eb457562efb3c6c79eef2dc867bc8be1ca5c48461ed763030f038eba5e7bbebeb67b14c479088a15a9d76ebedf7e5c54768ed0c6744519f4099dfe5a4fac8af802aa00aa802dada7e0930009b2748a4df668c7a0000000049454e44ae426082"
-- stick up-right
png_stick[5] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002fd4944415478daec964d68134114c7dfcc6cd2cd2669d358539b2a166a45d12a542bbd147a500fe2d59bd09bd08347b5d2a3608be849ec413c78f5e44d29d422583c58899f60a1a8c7b469486b6ab3d99d2fdf6c5a3f0ee2a15ba8b0131e3bb3b3d9f9cd7ffef36689d61a7652a1b0c34a04f4af626df505b3cfa77ed69556f8460649a7b92961c78f4aa5fa05e73d420a26845c104214a414ef849435c925306681c6ff9c397b3e3c2042c8af8626a0951aacbbd53b7e5df737c56db0623188c59b80520adce3f07d7ded0317fc1a6ea6a7dba29094b2c162e0b41a61142693b60d8e93068620044d616082e2507052a9de6a75f5c94aa57a1da12642072abc7e095249c877749eebeada7f0f0704db4e07aa00254091b0014403358da0994c06f0325ea9ac7dc5693c0ad5d4dcab81f05c482513576c27491acb639611fd440c93a91b101ac0983ec61838490797938d69427a4255a8b3236f66ded9dadad24799992205936c4dbe65bae1ab042e9f1412b8f036fa343ec6c0b268afeff3217c6a2134200b35b62c9665b158332e10fe704022412986ea505058f77d1f77a0c07b1c430561bca79440ed5436548552a916a35011414ae8a59c32b337838200331cc3b627ab084902eb1b7570fb83f039d46aaea6c42a86eaa1c29b8ff06aee6db9bc5c7ecfa806c50568a951011e04177e0020390f20fcba8fe141f5db2ade132fda73ed537fa491ad1eae1b7968f8f0a1eec90793b79cd65d395c0a62b468f411a30b0dbca4b444281f6a6e0d4aa592ceb6e54f67b36d33c78e9f08f5e8b884f1f0d3fc6767746c024a4b8b402d05dcaf6334d4f0ea2e42acc13aaa52a9946169b1e84a492fd87662462809612b348797939bed8e3dbbe1f2c8301f1a1ca8684273802e3126c6ec0caeebaeb85ccc82b2ae12c2e6f37bf741dc4e405fdfa9f04c8de5f1ef40c5c5657e63fceee89103ddf7d399d4805470900b497cbffec5e3b2402c7bc90a52c3361dae586e6294302e62b818b7319e29658c2da7b522d352609a540d02b279cefc4df1e88b31028a8022a0082802facf817e08300089ac7b00c74169f10000000049454e44ae426082"
-- stick right-down
png_stick[6] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002f14944415478daec973b68144118c7bf79ec33210fcd5d3cd14a1485207a24be2095012b0bfb888d8d88d8c598462404022a7611924a0b41c4562b45d03a20511002166a941c92cbbd766f332fbfd9bb2206bbdb408a1bf8d8792c33bffbcfff9bbd21c618d84b85c21e2b5da02e5017a80bd405daeb40bcd3090821f6711d631223c67818f8dedbe74b8fa1b73f04a30924c280903108a581721f1871c0008183870e83eb07502c9ec90e08cb0cc6dcb6f6458c694ac92263ec9c22708c19459426df40c1327ecad7c1fe06b34b0a61b9b2bd513890736eddb8369f2be4a60ca179309468ad51a100e2382ec7427ec4f61421eceb6e012d618cdacaf8f93198bd3f05f9c2b0d38c92615c14ecdf1b8d63ae56e0fb3d836e1c5dae542a13b87b5771bf5fa56a650cb488919c387e64617e6e3a1cdc9f072d0938aedff217b1bb83b96308685f811784e00761502a955e369bf14418f6bccb146876fa3628a59e8e9e3d35d9dbdf3fa19401f44e9abf943a291421ad64b66a29eeb56119d9ac54ee0d0e0c7c01ebabac808aa747eca243fb724327d1b8c07d9e4250ca532046694b25d2723243282a29f49101a845d1f87a69fd120e3ccb0ca85eaf00e7bca02197679401b58a208405e2a81461141caf07b491a095006b7024c6b681300c48d214854c0f4689f327426d2821aad6be1ae52006c1108a50ab1403d775c1615eaa184d6169baad161af5dac81468edf72ff8fef3c75ab95c59c6440294a0ed1bacda5d2206d3bd86699f609f698fa142f8b2947a8550f63e5320c70b817b01d41bf18366d430622bc1c54c6b6a7ce8f45663d0d01a6cd58e611240d488400a35478c59cd34cb8aa3175a1904f05a487db3566f2cd885ad42ccf5b05f41ebaaa55248210454ab9b50dea8dec5ee173b8fec8e81d2146f17ccb227b8ece74673eb519cfc19f330bdb983bee13cf58d48042a595b899ac91d25f51bce1dd8792fec18e8df09d123947df083bef1c0774794d6635288a3499c3029d5aa94725929fd09cfa5c8fae9bf1febeecdb50bd461f92bc00080f142528e6884dd0000000049454e44ae426082"
-- stick down-left
png_stick[7] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002fc4944415478daec97cf6b134114c7df9b1f49376992466a42951e2c085eaa52a82058043d7852446f9ed5433d892278f2e28f6a8f821ef45211c47f402f1e2a05a9b616ab8262f1626bb5b5a63666b39becfcf0ed26487af0d4157ac8c083dd999d799ffdbeefceb068ad85cdd4186cb2d6066a03b581da406da0cd0e245a6f66665e41ddf76071611e102c681b80513e48ce400a079212019985ca5a154e9d390f9e5f3b4cd32e5238140f29ee6ff46c14ff1c4180e6da45c670800be843ce2cb17da2fb49ea3f4b3142219b330e521428ae6f04085bdfa855216bf52e60ea9623c501c771f25248608c2a8cc6a235cbe313935b6edf1d93dfbeff685d6f9ad61b8ccf4318068236fa24403093cb648fe6f3ddf9742e0f4e26074e3a03a9741776a473c5e3278ec9470feec0d0fe75f9ef6dd443eb147a3bfb1a4aa59543a595c567854201534e0a4422010c79f824f11aaa6358caf01a49310bab3f97e1f4f0a5ea878f9f876989b1583d648d2aba95b52bc5620f66b3391054264ea641c4c6b835118c3101846c5a2be8cce560f4eae517d32fdf8c71cee3fdca9696978e702986b2b92e48241304249a30184a19a9a38d09ab0a0615292420f003e8dedabd7bdfe0de6e825d89158812f5a41c0745428290a13a3c3232e36468a4e4351750232822239d80111c679caeb0e079951ea5d44aac1ba305560adffa2f481492f6a12424422f51726418f5a38d4022301d04e55aa04bcac4bc3122e3e34a9977c6e87ec444542e243307aa06f54047c6361829d928a53660a87b75756de6cbc2fcd7685b885321f2c99c0af4b5aa5b25c36a32af8d36c7d0cca17ea6e9a3705a3816d46be0575d5b71bd519174402653f12ad4488c8f4ba5f20eca7b239bed0219edc38d5a18f24cf8882610cffb0d15d7a5a305cf6debed7bb2bdb72ffeb3ac616c32ad0a464aabbf667dcfbbd999cef4cba48c608c52a082006a759fd4c2290dfc023298108cfd9fc3b5150a913d0d94795eaeb87b842f0684e03b05175a76a4e73a529929cfafbf77abe55a68a2387f36b1fde7da06da60fb23c000695a535b19961ce00000000049454e44ae426082"
-- stick left-up
png_stick[8] = "89504e470d0a1a0a0000000d49484452000000240000001e080600000044e1bc530000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002f74944415478daec96bb6b14411cc77ff3babbbd8b97dc1597c24721a40c42c04e24a4913476e23fa029d2fa2090d222d1c22648402c0cd88a8d687c60619a60f0911031284a2c924b2e674ceeb1bbb73b0f7fb34bf052596403116ee0c7ecceceec7ee6fb7bcc12630c1ca546e188b50ed0bf1a6fbf79f5f22910424129094c30e08c6519e36738e7039cb33eceb8e2427c63942e787eb0dc746b2d900a28f9bbaf7383179203da6b36d08dd1c3828bdb5db95cbf480bd05a83961242bf098dc0076dc882d1fa1a01324708391c85f6605091b142213f91cff78010024775f4cc4219bc54410b5cb77eb6d16cbec5a15169cc34390c20124b7fb9583c36d1ddd3836002d0651097060d5609d409682a0d8eb1f301dc46e3deeaea8f9febe5b5678c32383f349c5c501b42fab860e3d95c164118504aa28fc6a00463c5de445a45cf048265b239d295736ec8960761cb4d5621a3d520baab9fe24ee338b2861fe669609c81d7ac01456594895d8b548053a150e81e3875e2e4711c5b4b34edd12145ad2566998a8338b21042d5822008f05a21b4896389607681b1ba61468a7c5ab022a709c7106ebaecba9e91414822f7e080b67d28815845ac3a11a44430ec714ce908ace2385de5248ea17d7bea2df5be50a19cabedee40e0a32a7e0008072a0c41da949701aa174666d06f1a4119fab0ba555d7ab7f0a9fae1e3f2818148fbae9616dfc3f6767568bbbafeba542a91ac93059e4a6130333bd3ba3452c9ae21d65908f3fb5705ae8cde74bfac7c1fc557cc1c54a57d0a49943f9371de28452f6d6e943d848326aae57a7568f95ea45a88b1146261a45c43657303c6c6270161b2b8fc21da48b285d1c48184f5e431769f77ebb53b81ef9e731ca780551b15417e8235dae8caecec7c716a7a469437b6dadf7015ed7ee24747241da52b52938b588d7b519181542a735a70661885aff59dc6fcad89a911cf6f4de254d1b6ec49e24747bb5a24ee36b536cff1bc054e34d6209bf6519cdc455b44bb8ee6a03d427b90685077fe873a401da00e5007a803f41f02fd116000e3c982fd7409f4290000000049454e44ae426082"
-- button pressed
png_stick[9] = "89504e470d0a1a0a0000000d494844520000000e0000000c080600000052808cda0000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002314944415478da54514d6b534114bd33f3f2d2346d3e4d14c1208226a469d2b4b1b64a16d685ba286e0417453752115c0beace4de96f7021aec42c74a196420888a45854444d95d2e24225ea8b4a9ae6fbcdbc99715e62a5de993bdc0b73ce3d73062ddc5a045fd00fb5e616689a7e782411bb30369198f5793d112925f96118c6caf357f962be98fbf5fddbebc0be6168b4aa80166e2e82db37eccc1c4bdc4e4d24e7dd43be80101458d7040504dde5048c9d50af55bbf9a74bb987b947d74dd6fc4d4ecf9cf1674f4ede491f4d5f72b9063c94767a0084091082417001166d83dbedd60e458f8c86429e136bef4bcbf86074ffb9e4787cd6e9d406196380c00ea9b650a9081052040e30bb1d70602093c7a73389f4d80d9c4ac6af201003dcb27af7c186ca3eb8b76c029b4d1130ce940f443f35933daff97c43292e380121faa07fe7ff614f66d4024a5b3818f006b1ed9cb038eac9827eca5d00bbb6292512aab680330a420a842b95caa6949cef48db0de9f7fd77724ba864aae3b26a18db78edcdc7bb16635d6ed19e83cafbbfa01d89a437d26c37a0adfeda343bf45d71354f22a1f0177fc03b150a070f2899d8344d70683a104d531c1898d9856ab50cd46a025332df168b1bab8f0b57c9787ca4b55e5a5f223a8a84f7066252525231caeac3eb50dfae41a3f113348754f516ac2c17f285fb4fe605b53ea16b7317c1a9eb60185f2114de73762a3b7d393a1acb381c78500946ed56b3b351fab0f9f2d98b7bc6e7f28390d76ff10e853f020c00bb10128d6fff30230000000049454e44ae426082"
-- button released
png_stick[10] = "89504e470d0a1a0a0000000d494844520000000e0000000c080600000052808cda0000000467414d410000afc837058ae90000001974455874536f6674776172650041646f626520496d616765526561647971c9653c000002104944415478da5c513d6fd340187e7c77b66b3b7648683eda50905255e2434515ed8010a2e20f20c40f606302169018113362e1372096ae0826181003030343174450a14d55a5559538891dfb7cbe33761401e53d3d7a877b3eee7d4f7bb27a11ed2b17e02e36b1fd75bb7d1027b73bfdf19dde28680b2e1815d1cf4a9abc5de6622b24e9372281b54c81de68d661575dad2bb2076ae9fc96d55aba35184fce96bdb25ba9561d36e7b48684dddc55b8c795d0e795fcd80440af366ae8c4f2e9e9f56bcf87a38169180608d33167d9704a2554aaa7d0a8d7c12c8b75837853e3c9c239a877d42e991bfacaa5d7fd7e5fb36d07ddfd0384e104699a424a992385520aa5dcc4712c74fcf1ba25f977da68365f8c845a350d1331e75341515996cda0a6bd3029c43c497018842d12686453f0185ed903cf854041947fa0d4cc203fd0349c59a843daee320b8398a98ccc44d95fe20c27d33358a609dbb1346284fee763dfc7f1d12128252748ffa298d3d075145e259d1e91251ebd449eb2bbb7072555fe1a6d4afa3f4dcfb72df3f9443e6b4b8857f43a91bf846d3723abb4118dc7706c1b94d1a9a83029aa58cc2408301c0510bdfd4f6b4a3e6424bf5ce4c3fb6e62f893b2f7f8c7ce8ece0841f19f852c110271c2619b06bc287cb322e3bbcc7227f4b2ae2131585643f6818da3f722535ec8b9e1fbbe1a0c06914a45cfa3f8321f8c1ed592f899abb3d862067e0b3000ee6e3db7607375200000000049454e44ae426082"


local img_fightstick_base
local img_button_pressed
local img_button_released
local img_stick_back
local img_stick_center
local img_stick = {}

local FightstickDisplayEnabled = true

local gd = require "gd"

local dataInputsButtonsPlayer = {}
local dataInputsStickPlayer = {}
local width,height = emu.screenwidth() ,emu.screenheight()

local color1 = 0x13389780
local color2 = 0X00000080

----------------------------------------------------------------------------------------------------
-- image-string conversion functions

local function hexdump_to_string(hexdump)
	local str = ""
	for n = 1, hexdump:len(), 2 do
		str = str .. string.char("0x" .. hexdump:sub(n,n+1))
	end
	return str
end

local function init()	

	-- Read Images
	img_fightstick_base = gd.createFromPngStr(hexdump_to_string(png_fightstick_base)):gdStr()
	img_stick_back = gd.createFromPngStr(hexdump_to_string(png_stick_back)):gdStr()
	img_stick_center = gd.createFromPngStr(hexdump_to_string(png_stick_center)):gdStr()

	for i=1 , #png_stick  do  
		img_stick[i] = gd.createFromPngStr(hexdump_to_string(png_stick[i])):gdStr()	
	end

	-- Init dataInputsPlayer

	for n = 1, 2 do
		local stick_x = (n-1)/n*width + 50
		local stick_y = height - 33
		local button1_x = stick_x + 35
		local button1_y = stick_y + 5

		dataInputsButtonsPlayer[n] =
		{-- input buttons , x-image , y-image	
		{"P" .. n .. " Weak Punch", button1_x, button1_y+2},
		{"P" .. n .. " Medium Punch", button1_x+14, button1_y},
		{"P" .. n .. " Strong Punch", button1_x+28, button1_y},
		{"P" .. n .. " Weak Kick", button1_x-2, button1_y+14},
		{"P" .. n .. " Medium Kick", button1_x+12, button1_y+12},
		{"P" .. n .. " Strong Kick", button1_x+26, button1_y+12},	
		}

		dataInputsStickPlayer[n] =
		{-- inputs vector , x-image , y-image, id image pressed
		{{"P" .. n .. " Up", "P" .. n .. " Right"}, stick_x, stick_y, 5},
		{{"P" .. n .. " Right","P" .. n .. " Down"}, stick_x, stick_y, 6},
		{{"P" .. n .. " Down", "P" .. n .. " Left"}, stick_x, stick_y, 7},
		{{"P" .. n .. " Left", "P" .. n .. " Up"}, stick_x, stick_y, 8},
		{{"P" .. n .. " Up"}, stick_x, stick_y, 1},
		{{"P" .. n .. " Right"}, stick_x, stick_y, 2},
		{{"P" .. n .. " Down"}, stick_x, stick_y, 3},
		{{"P" .. n .. " Left"}, stick_x, stick_y, 4}
		}
	end
end

init()

function lib.Fightstick_Show()

	if FightstickDisplayEnabled ==false then
		return
	end	


	-- Display stick
	for i,dataInputs in pairs(dataInputsStickPlayer) do -- dataInputsPlayer Array

		-- coordinates stick center
		local stick_x = dataInputs[1][2]
		local stick_y = dataInputs[1][3]

		-- Display Fightstick base
		gui.gdoverlay(stick_x, stick_y, img_fightstick_base,0.8)
		--gui.box(stick_x, stick_y,stick_x+80, stick_y+29,color1,color2)


		-- Display stick back
		gui.gdoverlay(stick_x, stick_y, img_stick_back)
		
		isNeutralStickInput = true
		for j,dataInput in pairs(dataInputs) do -- dataInputs Array

			local isPressedInput = true		

			for k,input in pairs(dataInput[1]) do -- Inputs array
				isPressedInput = isPressedInput and joypad.get()[input]				
			end

			if isPressedInput then
				-- select id image pressed or release
				gui.gdoverlay(dataInput[2], dataInput[3], img_stick[dataInput[4]])
				isNeutralStickInput = false
				break 
						
			end
		end

		if isNeutralStickInput then
			gui.gdoverlay(stick_x, stick_y, img_stick_center)
		end
	end

	
	-- Display buttons
	for i,dataInputs in pairs(dataInputsButtonsPlayer) do -- dataInputsPlayer Array

		for j,dataInput in pairs(dataInputs) do -- dataInputs Array
		
			-- select id image pressed or release
			local id_image = joypad.get()[dataInput[1]] and 9 or 10

			gui.gdoverlay(dataInput[2], dataInput[3], img_stick[id_image])						
		end
	end
end

----------------------------------------------------------------------------------------------------
-- hotkey function
----------------------------------------------------------------------------------------------------
function lib.FightstickDisplay_Enable(incrementCounter)

	if incrementCounter ~= 0  then
		FightstickDisplayEnabled = not FightstickDisplayEnabled
	end	

	if FightstickDisplayEnabled then
		return "On"
	else
		return "Off"
	end
end

return lib
